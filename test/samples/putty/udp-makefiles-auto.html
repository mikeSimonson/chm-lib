<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=US-ASCII">
<title>Automatically generated Makefiles</title>
<link rel="previous" href="udp-640x480.html">
<link rel="ToC" href="index.html">
<link rel="next" href="udp-ssh-coroutines.html">
<link rel="stylesheet" type="text/css" href="chm.css"></head>
<body>
<h1><a name="udp-makefiles-auto"></a>D.11 Automatically generated <code>Makefile</code>s</h1>
<p>
PuTTY is intended to compile on multiple platforms, and with multiple compilers. It would be horrifying to try to maintain a single <code>Makefile</code> which handled all possible situations, and just as painful to try to directly maintain a set of matching <code>Makefile</code>s for each different compilation environment.
</p>
<p>
Therefore, we have moved the problem up by one level. In the PuTTY source archive is a file called <code>Recipe</code>, which lists which source files combine to produce which binaries; and there is also a script called <code>mkfiles.pl</code>, which reads <code>Recipe</code> and writes out the real <code>Makefile</code>s. (The script also reads all the source files and analyses their dependencies on header files, so we get an extra benefit from doing it this way, which is that we can supply correct dependency information even in environments where it's difficult to set up an automated <code>make depend</code> phase.)
</p>
<p>
You should <em>never</em> edit any of the PuTTY <code>Makefile</code>s directly. They are not stored in our source repository at all. They are automatically generated by <code>mkfiles.pl</code> from the file <code>Recipe</code>.
</p>
<p>
If you need to add a new object file to a particular binary, the right thing to do is to edit <code>Recipe</code> and re-run <code>mkfiles.pl</code>. This will cause the new object file to be added in every tool that requires it, on every platform where it matters, in every <code>Makefile</code> to which it is relevant, <em>and</em> to get all the dependency data right.
</p>
<p>
If you send us a patch that modifies one of the <code>Makefile</code>s, you just waste our time, because we will have to convert it into a change to <code>Recipe</code>. If you send us a patch that modifies <em>all</em> of the <code>Makefile</code>s, you will have wasted a lot of <em>your</em> time as well!
</p>
<p>
(There is a comment at the top of every <code>Makefile</code> in the PuTTY source archive saying this, but many people don't seem to read it, so it's worth repeating here.)
</p>

<!-- version IDs:
PuTTY release 0.67
-->
</body>
</html>
